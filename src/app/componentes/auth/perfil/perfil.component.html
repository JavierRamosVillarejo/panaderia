<div class="d-flex justify-content-center">

    <div class="card col-sm-6 text-center">
    
        <div class="card-header h5 text-center">
                Tu Perfil
        </div>
        
            <div class="card-img-top rounded-circle justify-content-center"  >
                <img class="" style="width: 200px;" src="{{perfil.imgSrc? perfil.imgSrc : 'assets/images/default-avatar.png'}}" >
            </div>

            <div class="card-body ">
                    <p>NOMBRE: {{perfil.nombre}}</p>
                    <p>APELLIDOS: {{perfil.apellidos}}</p>
                    <p>DNI: {{perfil.dni}}</p>
                    <p>EMAIL: {{perfil.email}}</p>
            <div>
                <div class="card-footer">

                <button class="btn bg-warning" (click)="visible=true" *ngIf="visible==false">Editar Perfil</button>

            </div>    
            
            </div>
            

            <div class="card border-warning" *ngIf="visible">
                <div class="card-header text-white bg-primary" (click)="visible=false">Cerrar X</div>
                <div class="card-body">
                    <h4 class="card-title">Editar Perfil</h4>
                    <div class="card-text">
                        <form class="form-group" [formGroup]="formPerfil" (submit)="editarPerfil() " data-dismiss="modal" aria-label="Close">
                    
                          <label form-label mt-4 for="nombre">Nombre</label><input type="text" class="form-control" formControlName="nombre" id="nombre">
                          <label  form-label mt-4 for="apellidos">Apellidos</label><input type="text" class="form-control" formControlName="apellidos" id="apellidos">
                          <br> 
                          <label form-label mt-4 for="password">Contraseña</label><input type="password" class="form-control" formControlName="password" id="password">
                            
                          <label form-label mt-4 for="email">Email</label><input type="text" class="form-control" formControlName="email" id="email"> 
                          <br>
                          <label form-label mt-4 for="dni">dni</label><input type="text" class="form-control" class="form-control" formControlName="dni" id="dni">
                          <br>
                          
                          <input type="submit" value="Editar" class="btn btn-primary" data-dismiss="modal" aria-label="Close"  [disabled]="formPerfil.invalid  " data-toggle="modal" data-target="#modalEditado">
                        </form>
                        <div class="d-flex justify-content-center" *ngIf="formPerfil.invalid ">
                          <div class="alert alert-dismissible alert-danger" style="max-width: 20rem;" >
                              <div class="card-body">
                                <p class="card-text" *ngIf="dniN.invalid && formPerfil.valueChanges" >-El dni no es Correcto</p>
                                <p class="card-text" *ngIf="emailN.invalid && formPerfil.valueChanges" >-El email no es Correcto</p>
                                <p class="card-text" *ngIf="passN.invalid && formPerfil.valueChanges" >-La contraseña debe tener almenos 4 caracteres</p>
                                
                              </div>
                          </div>
                      </div>
                          <label form-label mt-4 for="fromimage"> Cambia Avatar</label>
                        <form [formGroup]="formImage" class="form-group" (submit)="subirImagen()">
                          <input type="file" class="form-control" formControlName = "imagen"  (change) = "cambiaImagen($event)"><br>
                          <button class="btn btn-success" data-dismiss="modal" aria-label="Close" [disabled]="formImage.invalid"  (click)="subirImagen()">Subir Imagen</button>
                        </form>
                           <div  class="alert alert-dismissible alert-danger"  *ngIf="mensaje">
                              {{mensaje}}
                            </div>
                            <hr>
                            
                            <button class="btn btn-danger" data-dismiss="modal" aria-label="Close" (click)="visible=false" data-toggle="modal" data-target="#modalBorrar">Borrar Usuario</button>
                            
                        

                    </div>
                </div>
            </div>

            <div class="modal fade bg-success" id="modalEditado" >
                <div class="modal-dialog modal-sm">
                  <div class="modal-content">
                  
                    <!-- Modal Header -->
                    <div class="modal-header">
                      <h4 class="modal-title">Edicion Correcta</h4>
                      <button type="button" class="close" data-dismiss="modal">&times;</button>
                    </div>
                    <!-- Modal footer -->
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                    
                  </div>
                </div>
            </div>
            <div class="modal fade bg-danger" id="modalBorrar" >
              <div class="modal-dialog modal-sm">
                <div class="modal-content">
                
                  <!-- Modal Header -->
                  <div class="modal-header">
                    <h4 class="modal-title">Borrar Usuario</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                  </div>
                  <div class="modal-body">
                    <p>¿Seguro que quieres borrar tu usuario</p>
                    <button class="btn btn-danger" (click)="eliminarUsuario()" data-dismiss="modal">SI, Estoy Seguro</button>
                  </div>
                  <!-- Modal footer -->
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  </div>
                  
                </div>
              </div>
          </div>
            
          
            
        </div>
    </div>
    

    
    
</div>